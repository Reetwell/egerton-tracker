<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>Egerton U15 Lions</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ========================================
           CSS VARIABLES & RESET
        ======================================== */
        * {
            -webkit-tap-highlight-color: transparent;
            box-sizing: border-box;
        }
        
        :root {
            --color-primary: #FACC15;
            --color-primary-light: #FEF9C3;
            --color-primary-dark: #CA8A04;
            --color-win: #22c55e;
            --color-draw: #FACC15;
            --color-loss: #ef4444;
            --color-home: #15803d;
            --color-away: #1d4ed8;
            --glass-bg: rgba(255, 255, 255, 0.75);
            --glass-border: rgba(0, 0, 0, 0.06);
            --transition-spring: cubic-bezier(0.175, 0.885, 0.32, 1.275);
            --transition-smooth: cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        body {
            background: linear-gradient(180deg, #f8f8f8 0%, #f0f0f5 100%);
            min-height: 100vh;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
        }

        /* ========================================
           GLASS MORPHISM COMPONENTS
        ======================================== */
        .glass-nav {
            background: rgba(255, 255, 255, 0.65);
            backdrop-filter: blur(40px) saturate(180%);
            -webkit-backdrop-filter: blur(40px) saturate(180%);
            border: 0.5px solid rgba(255, 255, 255, 0.6);
            box-shadow: 
                0 -1px 0 rgba(0, 0, 0, 0.04),
                0 8px 32px rgba(0, 0, 0, 0.08),
                inset 0 1px 0 rgba(255, 255, 255, 0.8),
                inset 0 -0.5px 0 rgba(0, 0, 0, 0.05);
        }

        .glass-header {
            background: rgba(255, 255, 255, 0.72);
            backdrop-filter: blur(30px) saturate(180%);
            -webkit-backdrop-filter: blur(30px) saturate(180%);
            border-bottom: 0.5px solid var(--glass-border);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
        }

        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px) saturate(150%);
            -webkit-backdrop-filter: blur(20px) saturate(150%);
            border: 0.5px solid var(--glass-border);
            box-shadow: 
                0 2px 12px rgba(0, 0, 0, 0.04),
                0 1px 2px rgba(0, 0, 0, 0.02),
                inset 0 1px 0 rgba(255, 255, 255, 0.9);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .glass-card:active { transform: scale(0.98); }

        .glass-card-yellow {
            background: rgba(254, 249, 195, 0.5);
            border: 0.5px solid rgba(250, 204, 21, 0.3);
            box-shadow: 0 2px 12px rgba(250, 204, 21, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.9);
        }

        /* ========================================
           STAT CARDS
        ======================================== */
        .stat-win { background: rgba(220, 252, 231, 0.6); border-color: rgba(34, 197, 94, 0.2); }
        .stat-draw { background: rgba(254, 249, 195, 0.6); border-color: rgba(250, 204, 21, 0.3); }
        .stat-loss { background: rgba(254, 226, 226, 0.6); border-color: rgba(239, 68, 68, 0.2); }

        /* ========================================
           NAVIGATION
        ======================================== */
        .nav-item {
            transition: all 0.25s var(--transition-smooth);
            position: relative;
        }
        
        .nav-item::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 50%;
            transform: translateX(-50%) scaleX(0);
            width: 4px;
            height: 4px;
            background: var(--color-primary);
            border-radius: 50%;
            transition: transform 0.25s var(--transition-smooth);
        }
        
        .nav-item.active::after { transform: translateX(-50%) scaleX(1); }
        .nav-item:active { transform: scale(0.9); }

        /* ========================================
           SIDEBAR (Desktop)
        ======================================== */
        .sidebar {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(40px) saturate(180%);
            -webkit-backdrop-filter: blur(40px) saturate(180%);
            border-right: 0.5px solid var(--glass-border);
            box-shadow: 1px 0 3px rgba(0, 0, 0, 0.02), inset -1px 0 0 rgba(255, 255, 255, 0.5);
        }
        
        .sidebar-item {
            border-radius: 12px;
            position: relative;
            overflow: hidden;
            transition: transform 0.3s var(--transition-spring);
        }
        
        .sidebar-item::before {
            content: '';
            position: absolute;
            inset: 0;
            background: rgba(250, 204, 21, 0.18);
            border-radius: 12px;
            transform: translateX(-105%);
            transition: transform 0.55s cubic-bezier(0.34, 1.56, 0.64, 1);
            z-index: -1;
        }
        
        @media (min-width: 768px) {
            .sidebar-item:hover::before { transform: translateX(0); }
            .sidebar-item:hover { transform: translateX(3px); }
            .sidebar-item:active { animation: sidebarBounce 0.6s var(--transition-spring); transform: translateX(3px); }
            .sidebar-item.active::before { transform: translateX(0); background: rgba(250, 204, 21, 0.25); }
            .sidebar-item.active { transform: translateX(3px); }
            .sidebar-item.active:hover::before { background: rgba(250, 204, 21, 0.32); }
        }
        
        @media (max-width: 767px) {
            .sidebar-item::before { display: none; }
            .sidebar-item:active { transform: scale(0.97); }
            .sidebar-item.active { background: rgba(250, 204, 21, 0.15); }
        }

        /* ========================================
           ANIMATIONS
        ======================================== */
        .page-content { animation: pageFadeIn 0.3s ease; }
        
        @keyframes pageFadeIn {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }

        @keyframes sidebarBounce {
            0% { transform: translateX(3px) scale(1); }
            25% { transform: translateX(3px) scale(0.92); }
            50% { transform: translateX(3px) scale(1.06); }
            75% { transform: translateX(3px) scale(0.97); }
            100% { transform: translateX(3px) scale(1); }
        }

        @keyframes welcomeFadeIn {
            0% { opacity: 0; transform: scale(0.9); }
            100% { opacity: 1; transform: scale(1); }
        }
        
        @keyframes badgeFadeIn {
            0% { opacity: 0; transform: scale(0.8) rotate(-10deg); }
            60% { transform: scale(1.05) rotate(2deg); }
            100% { opacity: 1; transform: scale(1) rotate(0deg); }
        }
        
        @keyframes homeSlideIn {
            0% { opacity: 0; transform: translateY(30px) scale(0.95); }
            100% { opacity: 1; transform: translateY(0) scale(1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-8px); }
            40%, 80% { transform: translateX(8px); }
        }
        
        .welcome-text { animation: welcomeFadeIn 0.6s var(--transition-spring); }
        .badge-animate { animation: badgeFadeIn 0.7s var(--transition-spring); }
        .home-slide-in { animation: homeSlideIn 0.6s var(--transition-spring); }
        .shake { animation: shake 0.4s ease; }

        /* ========================================
           FORM ELEMENTS
        ======================================== */
        .glass-input {
            background: rgba(255, 255, 255, 0.8);
            border: 0.5px solid rgba(0, 0, 0, 0.1);
            transition: all 0.2s ease;
        }
        
        .glass-input:focus {
            background: rgba(255, 255, 255, 0.95);
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(250, 204, 21, 0.2);
            outline: none;
        }

        .glass-select {
            background: rgba(255, 255, 255, 0.8);
            border: 0.5px solid rgba(0, 0, 0, 0.1);
            transition: all 0.2s ease;
            appearance: none;
            -webkit-appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%239ca3af' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            padding-right: 40px;
        }
        
        .glass-select:focus {
            background-color: rgba(255, 255, 255, 0.95);
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(250, 204, 21, 0.2);
            outline: none;
        }

        .login-input {
            background: rgba(255, 255, 255, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.9);
            transition: all 0.3s var(--transition-spring);
        }
        
        .login-input:focus {
            background: rgba(255, 255, 255, 0.9);
            border-color: var(--color-primary);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1), 0 0 0 3px rgba(250, 204, 21, 0.2);
            transform: scale(1.02);
            outline: none;
        }

        /* ========================================
           BUTTONS
        ======================================== */
        .btn-primary {
            background: var(--color-primary);
            color: #1f2937;
            transition: all 0.2s ease;
        }
        
        .btn-primary:active {
            transform: scale(0.97);
            background: var(--color-primary-dark);
        }

        .btn-glass {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 0.5px solid rgba(0, 0, 0, 0.08);
            transition: all 0.2s ease;
        }
        
        .btn-glass:active { transform: scale(0.97); background: rgba(255, 255, 255, 0.8); }
        .btn-glass.active { background: rgba(250, 204, 21, 0.25); border-color: rgba(250, 204, 21, 0.5); }

        /* ========================================
           PILLS & BADGES
        ======================================== */
        .pill {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border: 0.5px solid var(--glass-border);
        }
        
        .pill-home { background: rgba(220, 252, 231, 0.7); color: var(--color-home); }
        .pill-away { background: rgba(219, 234, 254, 0.7); color: var(--color-away); }

        .result-w { background: rgba(34, 197, 94, 0.15); color: #15803d; }
        .result-d { background: rgba(250, 204, 21, 0.2); color: #a16207; }
        .result-l { background: rgba(239, 68, 68, 0.15); color: #dc2626; }

        /* ========================================
           UTILITIES
        ======================================== */
        .safe-top { padding-top: env(safe-area-inset-top, 0px); }
        .safe-bottom { padding-bottom: env(safe-area-inset-bottom, 0px); }
        .scroll-container { overflow-y: auto; -webkit-overflow-scrolling: touch; }
        .number-display { font-variant-numeric: tabular-nums; font-feature-settings: "tnum"; }

        .absent-btn { backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); }
        .absent-btn.selected { background: rgba(254, 226, 226, 0.8); color: #dc2626; border-color: rgba(239, 68, 68, 0.4); }

        .suggestion-item { transition: all 0.2s ease; }
        .suggestion-item:hover { background: rgba(250, 204, 21, 0.15); }

        /* ========================================
           OVERLAY BACKGROUNDS
        ======================================== */
        .overlay-bg {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        .gradient-bg {
            background: linear-gradient(180deg, rgba(250, 204, 21, 0.1) 0%, rgba(255, 255, 255, 0.95) 50%);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }
    </style>
</head>
<body class="text-gray-900">
    <div id="app">
        <div class="min-h-screen flex items-center justify-center">
            <div class="text-center">
                <div class="w-10 h-10 border-2 border-yellow-400 border-t-transparent rounded-full animate-spin mx-auto mb-3"></div>
                <p class="text-gray-400 text-sm">Loading...</p>
            </div>
        </div>
    </div>

    <script>
    // ========================================
    // CONFIGURATION
    // ========================================
    const CONFIG = {
        SPREADSHEET_ID: '1sMHiLgwRAsnu2zWRCfdHWwuEMfefpOe30BIo_Zv01IE',
        API_KEY: 'AIzaSyAkb76g25dIADs9Ty5CD3V7BguWe3ahLPs',
        BADGE_IMG: 'egerton-tracker.png',
        APPS_SCRIPT_URL: 'https://script.google.com/macros/s/AKfycby6a_XWdPHAjEcId0-A57dRG26w_VJlF38lsVuBqnPGzeXAo3RTM76phbB7RA5n9zuwAA/exec',
        ADMIN_PASSCODE: '1505',
        TEAM_NAME: 'Egerton U15 Lions',
        SEASON: '2025/26'
    };

    const STATUS = {
        SCHEDULED: 'Scheduled',
        PLAYED: 'Played',
        POSTPONED: 'Postponed'
    };

    const RESULT = {
        WIN: 'Win',
        DRAW: 'Draw',
        LOSS: 'Loss'
    };

    const APP_STATE = {
        LOGIN: 'login',
        WELCOME: 'welcome',
        BADGE: 'badge',
        MAIN: 'main'
    };

    // ========================================
    // STATE MANAGEMENT
    // ========================================
    const state = {
        app: APP_STATE.LOGIN,
        currentTab: 'overview',
        loggedInPlayer: null,
        allMatches: [],
        fixtures: [],
        results: [],
        players: [],
        messages: [],
        lineups: [],
        resultFilter: null,
        searchOpen: false,
        searchQuery: '',
        selectedPlayer: null,
        selectedMatch: null,
        selectedMatchId: null,
        absentPlayers: [],
        loginInput: '',
        suggestions: [],
        adminUnlocked: false,
        enteredPasscode: '',
        newMessage: '',
        lineupViewOpen: false
    };

    // (rest of script continues...)
